// Generated by CoffeeScript 1.9.3
(function() {
  var bindTemplate, cookie, domify, notificationBarView, showCookieNotificationIfNeeded;

  domify = require('domify');

  cookie = require('cookie');

  bindTemplate = require('bind-jade');

  notificationBarView = bindTemplate(require('./views/notification-bar'));

  showCookieNotificationIfNeeded = function(arg) {
    var cookieName, maxWidth, message, notificationBar, parentElement;
    cookieName = arg.cookieName, maxWidth = arg.maxWidth, message = arg.message, parentElement = arg.parentElement;
    if (!cookie(cookieName)) {
      notificationBar = domify(notificationBarView({
        maxWidth: maxWidth,
        message: message
      }));
      notificationBar.querySelector('.accept').addEventListener('click', function() {
        cookie(cookieName, '1', {
          path: '/'
        });
        return notificationBar.classList.add('closed');
      });
      notificationBar.addEventListener('transitionend', function() {
        return notificationBar.parentElement.removeChild(notificationBar);
      });
      return parentElement.insertBefore(notificationBar, parentElement.firstChild);
    }
  };

  module.exports = showCookieNotificationIfNeeded;

}).call(this);
