// Generated by CoffeeScript 1.9.3
(function() {
  var bindTemplate, cookie, domify, notificationBarView;

  domify = require('domify');

  cookie = require('cookie');

  bindTemplate = require('bind-jade');

  notificationBarView = bindTemplate(require('./views/notification-bar'));

  module.exports = function(arg) {
    var cookieName, message, notificationBar, parentElement;
    cookieName = arg.cookieName, message = arg.message, parentElement = arg.parentElement;
    if ((cookieName != null) && cookie(cookieName)) {
      return;
    }
    notificationBar = domify(notificationBarView({
      message: message
    }));
    notificationBar.querySelector('.accept').addEventListener('click', function() {
      if (cookieName != null) {
        cookie(cookieName, '1', {
          path: '/'
        });
      }
      return notificationBar.classList.add('closed');
    });
    notificationBar.addEventListener('transitionend', function() {
      return notificationBar.parentElement.removeChild(notificationBar);
    });
    return parentElement.insertBefore(notificationBar, parentElement.firstChild);
  };

}).call(this);
